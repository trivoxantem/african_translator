<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>🌍 African Language Translator</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 min-h-screen flex items-center justify-center p-6">

    <div class="bg-white shadow-2xl rounded-3xl w-full max-w-xl p-8 space-y-6">
        <h1 class="text-4xl font-bold text-center text-indigo-700 animate-pulse">
            🌍 African Language Translator
        </h1>

        <!-- Form -->
        <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}

            <!-- Text Area -->
            <div>
                <label for="text" class="block text-sm font-medium text-gray-700 mb-1">Enter text (optional)</label>
                <textarea name="text" id="text" rows="4"
                    class="w-full border border-gray-300 rounded-2xl shadow-sm p-4 text-gray-800
                        focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 transition duration-200"
                    placeholder="Type or paste your text here...">{{ form.text.value|default_if_none:'' }}</textarea>
            </div>

            <!-- Language Dropdown -->
            <div>
                <label for="language" class="block text-sm font-medium text-gray-700 mb-1">Select Language</label>
                <select name="language" id="language"
                    class="w-full border border-gray-300 rounded-2xl shadow-sm p-4 text-gray-800 bg-white
                        focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 transition duration-200">
                    {% for value, label in form.fields.language.choices %}
                        <option value="{{ value }}" {% if form.language.value == value %}selected{% endif %}>
                            {{ label }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <!-- File Upload -->
            {% comment %} <div>
                <label for="audio_file" class="block text-sm font-medium text-gray-700 mb-1">Upload Audio (WAV/MP3)</label>
                <input type="file" name="audio_file" id="audio_file"
                    class="w-full border border-gray-300 rounded-2xl shadow-sm cursor-pointer text-gray-600 p-2
                        focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 transition duration-200
                        file:mr-4 file:py-2 file:px-4
                        file:rounded-xl file:border-0 file:text-sm file:font-semibold
                        file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100" />
            </div> {% endcomment %}

            <!-- Submit Button -->
            <button type="submit"
                class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-purple-600 hover:to-indigo-600 
                    text-white font-semibold py-3 px-4 rounded-2xl shadow-lg transform transition hover:scale-105 duration-300">
                🔄 Translate
            </button>
        </form>



        <!-- Translation Output -->
        {% if translation %}
            <div class="mt-6 bg-green-50 border border-green-300 text-green-800 rounded-2xl p-6 shadow-md">
                <h2 class="text-lg font-semibold mb-2">📝 Translation:</h2>
                <p id="translatedText" class="mt-1 text-gray-800 font-medium">{{ translation }}</p>

                <!-- Play Button -->
                <button onclick="speakTranslation()" 
                    class="mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-xl shadow-md">
                    🔊 Listen
                </button>
            </div>

            <script>
                function speakTranslation() {
                    const text = document.getElementById("translatedText").innerText;
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = "en";  // default, you can map to language code
                    speechSynthesis.speak(utterance);
                }
            </script>
        {% endif %}

    </div>

</body>
</html>
